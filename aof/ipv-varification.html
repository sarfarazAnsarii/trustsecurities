<!DOCTYPE html>
<html lang="en">
<head>
  <title>IPV Varification | Trust Securities</title>
  <meta name="robots" content="noindex,nofollow">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">  

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Css style -->
  <link rel="stylesheet" type="text/css" href="../css/style.css">
  <link rel="stylesheet" type="text/css" href="../css/aof/aof.css">

  <!-- fave icons -->
  <link rel="apple-touch-icon" sizes="57x57" href="../images/faveicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../images/faveicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../images/faveicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../images/faveicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../images/faveicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../images/faveicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../images/faveicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../images/faveicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../images/faveicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../images/faveicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../images/faveicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../images/faveicons/favicon-16x16.png">
  
  <meta name="msapplication-TileColor" content="#AF862E">
  <meta name="msapplication-TileImage" content="../images/faveicons/ms-icon-144x144.png">
  <meta name="theme-color" content="#AF862E">

  <style type="text/css">
    
  </style>

</head>
<body>

<header>
  <section class="main-header">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="flex-wrap flex-center">
            <div class="brand">
              <a href="kyc-check.html">
                <img class="img-fluid" width="117" height="63" src="../images/trust-logo.svg" alt="Trust Securities">
              </a>
            </div>           
            <div class="ds-profile ml-auto">
              <div class="flex-wrap flex-center" id="dashProfileTab">
                <div class="mr-1">
                  <img src="../images/dashboard/menu-icons/profile.svg">
                </div>
                <div class="ds-name">                  
                  <div class="flex-wrap flex-center">
                    <span class="name-text mr-1">Sarfaraz Ansari</span>
                    <img width="17" height="7" src="../images/dashboard/caret.svg">
                  </div>
                  <div class="font12">Code:- FRM00448</div>
                </div> 
              </div> 
              <div class="ds-search-box">
                <div class="search-mode" id="dashProfile" style="display: none;">
                  <ul class="search-list profile-activity">
                    <li>
                      <a href="tel:022-2656 7536">
                        <img src="../images/aof/aof-call.svg">
                        <div>
                          <h4>Call KYC Help line</h4>
                          <span>022-2656 7536</span>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="mailto:ekyc.help@trustgroup.in">
                        <img src="../images/aof/aof-mail.svg">
                        <div>
                          <h4>Email KYC Help line</h4>
                          <span>ekyc.help@trustgroup.in</span>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="aof-line"></div>
                    </li>
                    <li>
                      <a href="">
                        <img src="../images/aof/aof-logout.svg">
                        <div>
                          <h4>Logout</h4>                          
                        </div>
                      </a>
                    </li>                            
                  </ul> 
                </div>
              </div>                               
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</header>

<section class="form-section aof-form-main">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 m-auto">
        <div class="flex-wrap flex-center">
          <div class="back-page">
            <a href="document-upload.html" class="btn btn-border"><img src="../images/aof/back-arrow.svg"> Back</a>
          </div>
          <div class="font14 ml-auto">
            Steps: 5 - 7 <span class="light-gray-color m-lr-1"> | </span> 70% <span class="circle-loader ml-1"></span>
          </div>
        </div>
        <div class="bonds-card p-20 mt-1">          
          <div>
            <h3 class="title-3">IPV Varification  
              <div class="info-item" id="stepsList">
                <img class="info" src="../images/aof/info.svg" />
              </div>
            </h3>
            <div class="ds-search-box kyc-status p-relative">
              <div class="search-mode slideDown" id="kycStatus">
                <ul class="profile-activity">
                  <li class="active">
                    <h4>KYC Check</h4>
                    <span>Enter personal and family details to proceed </span>
                  </li>
                  <li class="active">
                    <h4>Profile Creation</h4>
                    <span>Enter profile Details for next step</span>
                  </li>
                  <li class="active">
                    <h4>Bank and Icome Details</h4>
                    <span>Enter Bank and Income Details for bank verification</span>
                  </li>
                  <li class="active">
                    <h4>Trading Segment</h4>
                    <span>Please verify all blank fields </span>
                  </li>
                  <li class="active">
                    <h4>Nominee Details</h4>
                    <span>Please add nominee deatils</span>
                  </li>
                  <li class="active">
                    <h4>Document Upload</h4>
                    <span>Please Upload all required documents</span>
                  </li>
                  <li class="active">
                    <h4>IPV Varification</h4>
                    <span>Please Confirm IPV for account opening</span>
                  </li>
                  <li>
                    <h4>KYC Confirmation</h4>
                    <span>Check all details carefully before confirming</span>
                  </li>
                </ul> 
              </div>
            </div>            
            <span>Please Confirm IPV</span>
          </div>
          <div class="mt-1">
            <div class="gradient-line inherit"></div>
          </div>
          <div class="form-section">
            <div class="row">
              <div class="col-lg-12">
                <div class="form-input">

                 <!-- <video class="video-rtc" id="my-preview" controls autoplay></video> -->
                  <video class="video-rtc" id="my-preview" controls autoplay playsinline></video>

                  <div class="text-center mt-1 webrtc-btn">
                    <button id="btn-start-recording" class="btn btn-primary" >Start Recording</button>
                    <button id="btn-stop-recording" disabled="disabled" class="btn btn-border d-none">Save Recording</button>

                    <a id="btn-continue-next" href="kyc-confirmation.html" class="btn btn-primary d-none">Continue Next</a>


                  </div>


                </div>
                <div class="form-input">
                  <div class="p-tb-2">
                    <div class="beak-line-or text-center light-gray-color">
                      - OR -
                    </div>
                  </div>
                </div>
                <div class="form-input">
                  <h3 class="flex-wrap flex-center">
                    <img src="../images/aof/camera.svg" alt="camera icons" />
                    <span class="ml-1">If you want to go with photo</span>
                  </h3>
                  <div class="row mt-2 reverse-mob">
                    <div class="col-lg-6 col-sm-6">
                      <div>
                        <div class="sm-center">
                          <h2 class="title m-0">4503</h2>
                          <p class="font12 brand-color">
                            Your OTP is valid until 05:14PM
                          </p>
                        </div>
                        <div class="mt-1 mr-1">
                          <p><strong>Steps:</strong></p>
                        
                          <ol class="form-list font14">
                            <li>You have to take photo with OTP number on paper.</li>
                            <li>Then save the photo and proceed for next step.</li>
                          </ol>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 sm-center text-right">
                      <div class="p-relative d-inline-block">                      
                        <img  id="snapShot" src="../images/aof/ipv.jpg" alt="ipv image">
                        <div class="ipv-text">
                           4503
                        </div>                      
                     </div>
                    </div>
                    
                  </div>
                   <div class="text-center mt-1 webrtc-btn b-sticky">
                    <button class="btn btn-primary" id="cameraPhoto">Start IPV</button> 
                    <a id="btn-continue-ivpv" href="kyc-confirmation.html" class="btn btn-primary d-none">Continue Next</a>                  
                  </div>                  
                </div>
              </div>                            
            </div>
            

            <!-- <div class="row mt-1">
              <div class="col-lg-12">
                <div class="form-input">
                  <a class="btn btn-primary d-block" href="e-sign.html">PROCEED <img class="ml-1" src="../images/aof/arrow-right.svg" /></a>
                </div> 
              </div>
            </div> -->

          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<div class="st-modal" data-modal="recordingError">
  <div class="ds-card-box">
    <div class="square-card">
      <div class="ds-close">
        <img src="../images/icons/close-icon.svg">
      </div>
      <div class="md-hading">
        <img width="50" height="50" src="../images/aof/close-red.svg" alt="Check icon" />
        <h3 class="title-2 mt-1" id="dataTitle">Permission denied</h3>   
        
        <p class="font14">Kindly proive your device permission for video varification</p>
        <button class="btn btn-border mt-1" id="camPermission">Camera Permission</button>

      </div>
      
    </div>
  </div>
</div>


<div class="st-modal" data-modal="ivpSucess">
  <div class="ds-card-box">
    <div class="square-card">
      <div class="ds-close">
        <img src="../images/icons/close-icon.svg">
      </div>
      <div class="md-hading">
        <img width="50" height="50" src="../images/aof/check-green.svg" alt="Check icon" />
        <h3 class="title-2 mt-1" id="dataTitle">IPV Sucessfull</h3>   
        
        <p class="font14">Redirecting to KYC confirmation..</p>
        <!-- <button class="btn btn-border mt-1" id="camPermission">Camera Permission</button> -->

      </div>
      
    </div>
  </div>
</div>

<div class="st-modal camera-ipv" data-modal="cameraPhoto">
  <div class="ds-card-box">
    <div class="square-card">
      <div class="ds-close">
        <img src="../images/icons/close-icon.svg">
      </div>
      <div class="md-hading">                
        <div id="camera" class="camera mt-1"></div>

        <div class="text-center webrtc-btn">
          <button class="btn btn-primary mt-1" onclick="takeSnapShot()">Capture Photo</button>
        </div>

      </div>
      
    </div>
  </div>
</div>

<footer class="p-0">
  <div class="copyright mt-2">
    <div class="container">
        <div class="row">
          <div class="col-lg-6">
            <p class="cp-list">
              © <span id="fullYear"></span> All Rights Reserved.
            </p>     
          </div>
          <div class="col-lg-6">
            <ul class="cp-list">
              <li><a href="#">Terms of use</a></li>
              <li><a href="#">Disclaimer</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Regulatory</a></li>
              <li><a href="#">Disclosures</a></li>
            </ul>
          </div>
        </div>
    </div>
  </div>
</footer>

<div class="fixed-btm">
  <div class="question-chat-box">
    <div class="answer-chat-box d-none" id="answerChatBox">
      <div class="bonds-card">
        <div class="help-head">
          <div class="flex-wrap flex-center">
            <img class="mr-1" src="../images/aof/help.svg" /><h3>Help</h3>
          </div>
        </div>
        <div class="help-body p-1">
          <h3 class="brand-color">Profile Creation</h3>
          <p class="mt-1"><strong>Input:</strong></p>
          <ul class="help-list mt-1">
            <li>Insert Date of Birth.</li>
            <li>Insert PAN Number</li>
            <li>Mobile Family : Please select appropriate relationship from dropdown</li>
            <li>Email Family : Please select appropriate relationship from dropdown</li>
          </ul>
          <h3 class="brand-color mt-1">Help</h3>
          <p class="mt-1 font14">
            If already registered on CVL / NDML : Your Name, Address and other details would be fetched and available on Profile Creation page for verification If not registered on CVL / NDML : 1] Please put your Aadhar number, Data would be fetched from Digi locker and populated on Profile creation page for verification. 2] You will receive OTP on Aadhar Registered Mobile for Authentication. If neither registered on CVL / NDML or Aadhar- You can put details manually and proceed
          </p>
        </div>
      </div>
    </div>
    <div class="q-img text-right" id="questionMark">
      <img src="../images/aof/question-mark.svg" alt="Question Mark">
    </div>    
  </div>  
</div>

<script src="../js/jquery.min.js"></script>
<script src="../js/aof/aof.js"></script>
<script src="../js/aof/RecordRTC.js"></script>

<script type="text/javascript">
 var video = document.getElementById('my-preview');

  function captureCamera(callback) {
      navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(function(camera) {
          callback(camera);
      }).catch(function(error) {
          alert('Unable to capture your camera. Please check console logs.');
          console.error(error);
      });
  }

  function stopRecordingCallback() {
      video.src = video.srcObject = null;
      video.muted = false;
      video.volume = 1;
      video.src = URL.createObjectURL(recorder.getBlob());
      
      recorder.camera.stop();
      recorder.destroy();
      recorder = null;
  }

  var recorder; // globally accessible

  document.getElementById('btn-start-recording').onclick = function() {
      this.disabled = true;
      captureCamera(function(camera) {
          video.muted = true;
          video.volume = 0;
          video.srcObject = camera;

          recorder = RecordRTC(camera, {
              type: 'video'
          });

          $("#btn-continue-next").addClass("d-none")

          recorder.startRecording();

          // release camera on stopRecording
          recorder.camera = camera;

          // document.getElementById('btn-stop-recording').disabled = false;

          setTimeout(function(){
            document.getElementById('btn-stop-recording').disabled = false;
              $("#btn-stop-recording").removeClass("btn-border");
              $("#btn-stop-recording").removeClass("d-none");
              $("#btn-stop-recording").addClass("btn-primary");

          }, 1000)
      });
  };

  document.getElementById('btn-stop-recording').onclick = function() {
      this.disabled = true;
      recorder.stopRecording(stopRecordingCallback);
      $("#btn-start-recording").text("Re Start");
      $("#btn-start-recording").removeClass("btn-primary");
      $("#btn-start-recording").addClass("btn-border");
      document.getElementById('btn-start-recording').disabled = false;
      $("#btn-stop-recording").addClass("d-none");
      $("#btn-continue-next").removeClass("d-none")
  };

 </script>


<script type="text/javascript" src="../js/aof/webcam.js"></script>

<script>
     // CAMERA SETTINGS.
    
  Webcam.attach('#camera');
      
    $("#cameraPhoto").on("click", function(){
      Webcam.set({       
      width: 183,
      height: 200, 
        image_format: 'jpeg',
        jpeg_quality: 100
      });
      
      

      $("body").addClass("over-hide");
      $("body").find('.st-modal[data-modal="cameraPhoto"]').addClass("active");



      takeSnapShot = function () {
          Webcam.snap(function (data_uri) {
              $("#snapShot").attr("src", ""+data_uri+"");
              $(".ipv-text").hide();
              
              setTimeout(function(){

                $("body").removeClass("over-hide");
                $("body").find('.st-modal[data-modal="cameraPhoto"]').removeClass("active");
                $("#btn-continue-ivpv").removeClass("d-none");
                
                $("#cameraPhoto").text("Re Capture");
                $("#cameraPhoto").removeClass("btn-primary");
                $("#cameraPhoto").addClass("btn-border");
                $("#cameraPhoto").text("Re Capture");
                 
              },500);


          });
      }
    });

    


    $(".st-open-modal").on("click", function () {
      var dataModal = $(this).attr("id");
      $("body").addClass("over-hide");
      $("body").find('.st-modal[data-modal="' + dataModal + '"]').addClass("active");
    });

</script>
<footer><small id="send-message"></small></footer>
<script src="https://www.webrtc-experiment.com/common.js"></script>
</body>
</html>
